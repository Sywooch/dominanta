RewriteEngine On

# Without duplicate slashes
RewriteCond %{THE_REQUEST} //
RewriteRule .* /$0 [R=301,L]

# Only HTTPS
# RewriteCond %{HTTPS} off [OR]
# RewriteCond %{HTTP_HOST} ^www\. [NC]
# RewriteCond %{HTTP_HOST} ^(?:www\.)?(.+)$ [NC]
# RewriteRule ^ https://%1%{REQUEST_URI} [L,NE,R=301]

# Without WWW
# RewriteCond %{HTTP_HOST} ^www\.(.*) [NC]
# RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Without last slash
RewriteRule ^(.+[^/])/$ https://%{HTTP_HOST}/$1 [R=301,L]


# Rules for framework
RewriteCond %{REQUEST_FILENAME} !^favicon\.ico
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [L,QSA]